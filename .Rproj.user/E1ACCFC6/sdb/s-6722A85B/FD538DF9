{
    "contents" : "require(\"jsonlite\")\nrequire(\"RCurl\")\nrequire(\"ggplot2\")\n\n# Dataframe created from CSV table created in SQL\ndeath_df <- data.frame(fromJSON(getURL(URLencode('129.152.144.84:5001/rest/native/?query=\"select * from DEATH where NUMBER_OF_DEATHS < 100000\"'),httpheader=c(DB='jdbc:oracle:thin:@129.152.144.84:1521/PDBF15DV.usuniversi01134.oraclecloud.internal', USER='C##cs329e_nar784', PASS='orcl_nar784', MODE='native_mode', MODEL='model', returnDimensions = 'False', returnFor = 'JSON'), verbose = TRUE), ))\n\nsummary(death_df)\nhead(death_df)\n\n# Create the Crosstab dataframe\nKPI_Low_Max_value = .5 \nKPI_Medium_Max_value = 1\n\nKPI_df <- death_df %>% group_by(AGE_GROUP, SEX) %>% summarize(sum_death = sum(NUMBER_OF_DEATHS)/1000000, sum_100 = sum(DEATH_RATE_PER_100_000)/1000000) %>% mutate(ratio = sum_death / sum_100) %>% mutate(kpi = ifelse(ratio <= KPI_Low_Max_value, '03 Low', ifelse(ratio <= KPI_Medium_Max_value, '02 Medium', '01 High'))) %>% rename(age_group=AGE_GROUP, sex=SEX, SUM_DEATH=sum_death, SUM_100=sum_100, RATIO=ratio, KPI=kpi)%>%tbl_df\n\nsummary(KPI_df)\nhead(KPI_df)\n\n\n\n\n\n\n\n\n",
    "created" : 1447205300097.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4092692356",
    "id" : "FD538DF9",
    "lastKnownWriteTime" : 1447205201,
    "path" : "~/DataVisualization/DV_TProject1/01 Data/Death_Dataframes.R",
    "project_path" : "01 Data/Death_Dataframes.R",
    "properties" : {
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "type" : "r_source"
}